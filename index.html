<!DOCTYPE html>
<html lang="lo">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Smile Panel</title>
    <style>
        body { font-family: 'Noto Sans Lao', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #f0f2f5; margin: 0; }
        .login-container { background-color: white; padding: 40px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); width: 320px; }
        h2 { text-align: center; color: #333; }
        .input-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; color: #555; }
        input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
        button { width: 100%; padding: 10px; border: none; border-radius: 4px; background-color: #007bff; color: white; font-size: 16px; cursor: pointer; }
        button:hover { background-color: #0056b3; }
        #message { margin-top: 20px; text-align: center; font-weight: bold; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>

    <div class="login-container">
        <h2>ເຂົ້າສູ່ລະບົບ</h2>
        <form id="login-form">
            <div class="input-group">
                <label for="username">ຊື່ຜູ້ໃຊ້:</label>
                <input type="text" id="username" name="username" required>
            </div>
            <div class="input-group">
                <label for="password">ລະຫັດຜ່ານ:</label>
                <input type="password" id="password" name="password" required>
            </div>
            <button type="submit">ລ໋ອກອິນ</button>
        </form>
        <div id="message"></div>
    </div>

    <script>
        // ເລືອກຟອມ ແລະ ຊ່ອງສະແດງຂໍ້ຄວາມຈາກ HTML
        const loginForm = document.getElementById('login-form');
        const messageDiv = document.getElementById('message');

        // ເພີ່ມ Event Listener ເພື່ອດັກຈັບການກົດປຸ່ມ "ລ໋ອກອິນ"
        loginForm.addEventListener('submit', function(event) {
            // ຢຸດການทำงานປົກກະຕິຂອງຟອມ (ບໍ່ໃຫ້ໜ້າเว็บโหลดໃໝ່)
            event.preventDefault();

            // ເອົາຂໍ້ມູນຈາກຊ່ອງປ້ອນຂໍ້ມູນ
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // ສະແດງຂໍ້ຄວາມ "ກຳລັງໂຫຼດ..."
            messageDiv.className = '';
            messageDiv.textContent = 'ກຳລັງກວດສອບ...';

            // ໃຊ້ Fetch API ເພື່ອສົ່ງຂໍ້ມູນໄປທີ່ login.php ຂອງເຮົາ
            fetch('api/auth/login.php', {
                method: 'POST', // ຕ້ອງເປັນ POST
                headers: {
                    'Content-Type': 'application/json' // ບອກວ່າເຮົາກຳລັງສົ່ງຂໍ້ມູນແບບ JSON
                },
                body: JSON.stringify({ // ແປງຂໍ້ມູນ JavaScript ເປັນ JSON string
                    username: username,
                    password: password
                })
            })
            .then(response => response.json()) // ແປງຄຳຕອບທີ່ໄດ້ຮັບກັບມາເປັນ JavaScript object
            .then(data => {
                // ເມື່ອໄດ້ຮັບຂໍ້ມູນສຸດທ້າຍ
                if (data.success) {
                    // ຖ້າລ໋ອກອິນສຳເລັດ
                    messageDiv.className = 'success';
                    messageDiv.textContent = data.message;
                    // ໃນອະນາຄົດ, ເຮົາຈະຂຽນโค้ดໃຫ້ມັນໄປໜ້າ Dashboard ຢູ່ບ່ອນນີ້
                } else {
                    // ຖ້າລ໋ອກອິນບໍ່ສຳເລັດ
                    messageDiv.className = 'error';
                    messageDiv.textContent = data.message;
                }
            })
            .catch(error => {
                // ຖ້າຫາກເກີດ Error ໃນການເຊື່ອມຕໍ່ API
                console.error('Error:', error);
                messageDiv.className = 'error';
                messageDiv.textContent = 'ເກີດຂໍ້ຜິດພາດໃນການເຊື່ອມຕໍ່.';
            });
        });
    </script>

</body>
</html>